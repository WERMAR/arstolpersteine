openapi: 3.0.0
info:
  title: Secured AR-Stolperstein API
  description: This is the secured OpenAPI Specification for the AR-Stolpersteine Backend
  version: 1.0.0
paths:
  /secured/stolpersteine/{userId}:
    get:
      summary: Get Stolpersteine for User
      description: Get all available Stolpersteine for an User
      operationId: getStolpersteineForUser
      parameters:
        - name: userId
          in: path
          description: ID of User
          required: true
          schema:
            type: integer
      responses:
        200:
          description: return all stolpersteine based on userId
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StolpersteineResponseDto'
        400:
          description: Bad Request when no userID was provided
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDto'
        404:
          description: If no Stolpersteine for UserId was found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDto'
        500:
          description: Internal Server Errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDto'
    post:
      summary: Create a new Stolpersteine for given userId
      description: Get all available Stolpersteine for an User
      operationId: addStolpersteinForUser
      parameters:
        - name: userId
          in: path
          description: ID of User
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StolpersteineReqDto'
      responses:
        200:
          description: return created stolpersteine
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StolpersteineResponseDto'
        400:
          description: Bad Request when no valid request was send
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDto'
        500:
          description: Internal Server Errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDto'

components:
  schemas:
    ProblemDto:
      type: object
      properties:
        errorCode:
          type: integer
          example: 400
        description:
          type: string
          example: Bad Request - Missing Parameter
    VictimReqDto:
      type: object
      required:
        - firstname
        - lastname
        - dateOfBirth
        - dateOfDeath
      properties:
        firstname:
          type: string
          example: Max
        lastname:
          type: string
          example: Mustermann
        dateOfBirth:
          type: string
          format: date
          example: 1933-12-21
        dateOfDeath:
          type: string
          format: date
          example: 1942-02-23
    AddressReqDto:
      type: object
      required:
        - streetName
        - houseNumber
        - postCode
      properties:
        streetName:
          type: string
          example: Mustermann-Strasse
        houseNumber:
          type: string
          maxLength: 4
          minLength: 1
          example: 12a
        postCode:
          type: string
          maxLength: 5
          minLength: 5
          example: 97074
        city:
          type: string
          example: Wuerzburg
    PhotoReqDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 232
    StolpersteineReqDto:
      type: object
      required:
        - description
        - position
        - victim
      properties:
        description:
          type: string
          example: That is an example of a stolperstein description
        position:
          type: object
          required:
            - lat
            - lng
          properties:
            lat:
              type: number
              format: float
              example: 90.233232
            lng:
              type: number
              format: float
              example: 23.232232
        victim:
          $ref: '#/components/schemas/VictimReqDto'
        address:
          $ref: '#/components/schemas/AddressReqDto'
        photos:
          type: array
          items:
            $ref: '#/components/schemas/PhotoReqDto'

    VictimResponseDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 232
        firstname:
          type: string
          example: Max
        lastname:
          type: string
          example: Mustermann
        dateOfBirth:
          type: string
          format: date
          example: 1933-12-21
        dateOfDeath:
          type: string
          format: date
          example: 1942-02-23
    AddressResponseDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 232
        streetName:
          type: string
          example: "Mustermannstrasse"
        houseNumber:
          type: string
          maxLength: 4
          minLength: 1
          example: 12a
        postCode:
          type: string
          maxLength: 5
          minLength: 5
          example: 97074
        city:
          type: string
          example: Wuerzburg
    PhotoResponseDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 232
        heading:
          type: integer
          description: representing the heading on a compass for N, W, E, S
          format: int16
          example: 90
        resourceUrl:
          type: string
          description: specific path to resource to download the file
          example: "/232/example-crypt-3s2323.jpeg"
        resourceGroup:
          type: string
          description: representing the group where all available resources can be loaded as once
          example: "/232"
    StolpersteineResponseDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1023
        description:
          type: string
          example: That is an example of a stolperstein description
        position:
          type: object
          properties:
            lat:
              type: number
              format: float
              example: 90.233232
            lng:
              type: number
              format: float
              example: 23.232232
        victim:
          $ref: '#/components/schemas/VictimResponseDto'
        address:
          $ref: '#/components/schemas/AddressResponseDto'
        photos:
          type: array
          items:
            $ref: '#/components/schemas/PhotoResponseDto'

